(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1648],{90530:(e,t,i)=>{Promise.resolve().then(i.bind(i,58942)),Promise.resolve().then(i.bind(i,46179))},58942:(e,t,i)=>{"use strict";i.d(t,{default:()=>_});var n=i(57437),s=i(2265),o=i(22281),r=i(1959),l=i(98557),a=i(96293),c=i(41707),d=i(99763),u=i(34479),m=i(49309),h=i(35671),f=i(86608),x=i(17750),p=i(7497),g=i(99075),v=i(22966),j=i(37341),b=(0,i(55487).Z)("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),k=i(87138),y=i(30998),S=i(47025),w=i(60327);let _=e=>{let{lng:t}=e,{data:i}=(0,y.useSession)(),{t:_}=(0,S.$)(t,["pokemon","common","skill","ability","rule"]),[z,Z]=(0,s.useState)([]),[C,E]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{var e;if(null==i?void 0:null===(e=i.user)||void 0===e?void 0:e.id){E(!0);try{let e=await fetch("/api/decks/user"),t=await e.json();e.ok?Z(t):(0,w.c0)({title:"錯誤",message:t.message||"獲取牌庫失敗。",color:"red",icon:(0,n.jsx)(v.Z,{size:16})})}catch(e){(0,w.c0)({title:"錯誤",message:"獲取牌庫時發生錯誤。",color:"red",icon:(0,n.jsx)(v.Z,{size:16})})}finally{E(!1)}}})()},[i]);let M=e=>e.split(",").map(e=>{let t=e.lastIndexOf("-");return -1===t?{set:e.trim(),number:""}:{set:e.substring(0,t).trim(),number:e.substring(t+1).trim()}}),P=[{title:_("common:navigation.home"),href:"/"},{title:_("common:navigation.my_decks"),href:"#"}].map((e,t)=>(0,n.jsx)(o.e,{href:e.href,children:e.title},t));return(0,n.jsx)(r.W,{size:"lg",children:(null==i?void 0:i.user)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.O,{children:P}),(0,n.jsx)(d.Title,{order:1,mt:"sm",children:_("common:title.my_decks")}),C?(0,n.jsx)(a.Text,{component:"div",children:(0,n.jsx)(l.M,{children:(0,n.jsx)(u.a,{size:"md",my:"md"})})}):(0,n.jsx)(m.r,{mt:"md",columns:10,children:z.map(e=>(0,n.jsx)(m.r.Col,{span:10,children:(0,n.jsxs)(h.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[(0,n.jsx)(h.Z.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:(0,n.jsxs)(f.Z,{mb:"xs",justify:"space-between",children:[(0,n.jsx)(x.x,{w:300,children:(0,n.jsx)(a.Text,{truncate:"end",children:e.deckName})}),(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(p.A,{variant:"default",size:"lg",component:k.default,href:"/decks/".concat(e.deck.id),children:(0,n.jsx)(j.Z,{})}),(0,n.jsx)(p.A,{variant:"default",size:"lg",component:k.default,href:"/decks/".concat(e.id,"/edit"),children:(0,n.jsx)(b,{})})]})]})}),(0,n.jsx)(m.r,{columns:10,mt:"md",children:M(e.deck.deckCards).map((i,s)=>(0,n.jsx)(m.r.Col,{span:{base:2,sm:2,md:1,lg:1},children:(0,n.jsx)(g.E,{radius:"md",src:"/".concat(t,"/").concat(i.set,"/").concat(i.set,"-").concat(i.number,".webp"),alt:"".concat(i.set,"-").concat(i.number)})},"".concat(e.id,"-").concat(i.set,"-").concat(i.number,"-").concat(s)))})]})},e.id))})]}):(0,n.jsx)(l.M,{children:(0,n.jsxs)(a.Text,{children:[_("common:errors.error_insufficient_permissions")," ",(0,n.jsx)(o.e,{component:k.default,href:"/login",size:"sm",children:_("common:login.login")})]})})})}},98557:(e,t,i)=>{"use strict";i.d(t,{M:()=>d});var n=i(57437);i(2265);var s=i(50591),o=i(86348),r=i(17750),l=i(869),a={root:"m_4451eb3a"};let c={},d=(0,l.b)((e,t)=>{let i=(0,s.w)("Center",c,e),{classNames:l,className:d,style:u,styles:m,unstyled:h,vars:f,inline:x,mod:p,...g}=i,v=(0,o.y)({name:"Center",props:i,classes:a,className:d,style:u,classNames:l,styles:m,unstyled:h,vars:f});return(0,n.jsx)(r.x,{ref:t,mod:[{inline:x},p],...v("root"),...g})});d.classes=a,d.displayName="@mantine/core/Center"},60327:(e,t,i)=>{"use strict";i.d(t,{yK:()=>c,N9:()=>d,Ps:()=>o,c0:()=>a,zn:()=>r});var n=i(64881),s=i(2265);let o=function(e){let t=e,i=!1,n=new Set;return{getState:()=>t,updateState(e){t="function"==typeof e?e(t):e},setState(e){this.updateState(e),n.forEach(e=>e(t))},initialize(e){i||(t=e,i=!0)},subscribe:e=>(n.add(e),()=>n.delete(e))}}({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return(0,s.useSyncExternalStore)(e.subscribe,()=>e.getState(),()=>e.getState())};function l(e,t){let i=e.getState(),n=function(e,t,i){let n=[],s=[],o={};for(let r of e){let e=r.position||t;o[e]=o[e]||0,o[e]+=1,o[e]<=i?s.push(r):n.push(r)}return{notifications:s,queue:n}}(t([...i.notifications,...i.queue]),i.defaultPosition,i.limit);e.setState({notifications:n.notifications,queue:n.queue,limit:i.limit,defaultPosition:i.defaultPosition})}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,i=e.id||(0,n.k)();return l(t,t=>e.id&&t.some(t=>t.id===e.id)?t:[...t,{...e,id:i}]),i}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return l(t,t=>t.filter(t=>{if(t.id===e){var i;return null===(i=t.onClose)||void 0===i||i.call(t,t),!1}return!0})),e}let d={show:a,hide:c,update:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return l(t,t=>t.map(t=>t.id===e.id?{...t,...e}:t)),e.id},clean:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;l(e,()=>[])},cleanQueue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;l(e,t=>t.slice(0,e.getState().limit))},updateState:l}},22966:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var n=(0,i(55487).Z)("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[253,5501,8839,1141,5948,2008,7235,5179,6179,7130,6215,1744],()=>t(90530)),_N_E=e.O()}]);