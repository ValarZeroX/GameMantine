(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1648],{95700:(e,n,t)=>{var i={"./en/ability.json":[13330,3330],"./en/common.json":[17056,7056],"./en/pokemon.json":[91013,1013],"./en/rule.json":[95481,5481],"./en/skill.json":[60976,976],"./zh-Hans/ability.json":[52326,2326],"./zh-Hans/common.json":[81775,1775],"./zh-Hans/pokemon.json":[66345,6345],"./zh-Hans/rule.json":[74806,4806],"./zh-Hans/skill.json":[69867,9867],"./zh-Hant/ability.json":[72975,2975],"./zh-Hant/common.json":[72349,2349],"./zh-Hant/pokemon.json":[86185,6185],"./zh-Hant/rule.json":[97637,7637],"./zh-Hant/skill.json":[1701,1701]};function s(e){if(!t.o(i,e))return Promise.resolve().then(()=>{var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n});var n=i[e],s=n[0];return t.e(n[1]).then(()=>t.t(s,19))}s.keys=()=>Object.keys(i),s.id=95700,e.exports=s},90530:(e,n,t)=>{Promise.resolve().then(t.bind(t,58942)),Promise.resolve().then(t.bind(t,85393))},58942:(e,n,t)=>{"use strict";t.d(n,{default:()=>S});var i=t(57437),s=t(2265),o=t(22281),l=t(1959),a=t(98557),r=t(96293),c=t(41707),d=t(99763),u=t(34479),h=t(49309),m=t(35671),j=t(86608),g=t(17750),x=t(7497),v=t(99075),f=t(22966),p=t(37341),k=(0,t(55487).Z)("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),b=t(87138),z=t(30998),y=t(47025),_=t(60327);let S=e=>{let{lng:n}=e,{data:t}=(0,z.useSession)(),{t:S}=(0,y.$)(n,["pokemon","common","skill","ability","rule"]),[Z,C]=(0,s.useState)([]),[w,O]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{var e;if(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id){O(!0);try{let e=await fetch("/api/decks/user"),n=await e.json();e.ok?C(n):(0,_.c0)({title:"錯誤",message:n.message||"獲取牌庫失敗。",color:"red",icon:(0,i.jsx)(f.Z,{size:16})})}catch(e){(0,_.c0)({title:"錯誤",message:"獲取牌庫時發生錯誤。",color:"red",icon:(0,i.jsx)(f.Z,{size:16})})}finally{O(!1)}}})()},[t]);let H=e=>e.split(",").map(e=>{let n=e.lastIndexOf("-");return -1===n?{set:e.trim(),number:""}:{set:e.substring(0,n).trim(),number:e.substring(n+1).trim()}}),N=[{title:S("common:navigation.home"),href:"/"},{title:S("common:navigation.my_decks"),href:"#"}].map((e,n)=>(0,i.jsx)(o.e,{href:e.href,children:e.title},n));return(0,i.jsx)(l.W,{size:"lg",children:(null==t?void 0:t.user)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.O,{children:N}),(0,i.jsx)(d.Title,{order:1,mt:"sm",children:S("common:title.my_decks")}),w?(0,i.jsx)(r.Text,{component:"div",children:(0,i.jsx)(a.M,{children:(0,i.jsx)(u.a,{size:"md",my:"md"})})}):(0,i.jsx)(h.r,{mt:"md",columns:10,children:Z.map(e=>(0,i.jsx)(h.r.Col,{span:10,children:(0,i.jsxs)(m.Z,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[(0,i.jsx)(m.Z.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:(0,i.jsxs)(j.Z,{mb:"xs",justify:"space-between",children:[(0,i.jsx)(g.x,{w:300,children:(0,i.jsx)(r.Text,{truncate:"end",children:e.deckName})}),(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(x.A,{variant:"default",size:"lg",component:b.default,href:"/decks/".concat(e.deck.id),children:(0,i.jsx)(p.Z,{})}),(0,i.jsx)(x.A,{variant:"default",size:"lg",component:b.default,href:"/decks/".concat(e.id,"/edit"),children:(0,i.jsx)(k,{})})]})]})}),(0,i.jsx)(h.r,{columns:10,mt:"md",children:H(e.deck.deckCards).map((t,s)=>(0,i.jsx)(h.r.Col,{span:{base:2,sm:2,md:1,lg:1},children:(0,i.jsx)(v.E,{radius:"md",src:"/".concat(n,"/").concat(t.set,"/").concat(t.set,"-").concat(t.number,".webp"),alt:"".concat(t.set,"-").concat(t.number)})},"".concat(e.id,"-").concat(t.set,"-").concat(t.number,"-").concat(s)))})]})},e.id))})]}):(0,i.jsx)(a.M,{children:(0,i.jsxs)(r.Text,{children:[S("common:errors.error_insufficient_permissions")," ",(0,i.jsx)(o.e,{component:b.default,href:"/login",size:"sm",children:S("common:login.login")})]})})})}},47025:(e,n,t)=>{"use strict";t.d(n,{$:()=>d});var i=t(2265),s=t(46027),o=t(90089),l=t(8358),a=t(64312),r=t(34583),c=t(70201);function d(e,n,t){let[s,a]=(0,l.fP)([c.YN]),r=(0,o.$G)(n,t),{i18n:d}=r;{let[n,t]=(0,i.useState)(d.resolvedLanguage);(0,i.useEffect)(()=>{n!==d.resolvedLanguage&&t(d.resolvedLanguage)},[d.resolvedLanguage]),(0,i.useEffect)(()=>{e&&d.resolvedLanguage!==e&&d.changeLanguage(e).then(()=>{t(e),a(c.YN,e,{path:"/"})})},[e,d,a])}return r}s.ZP.use(o.Db).use(r.Z).use((0,a.Z)((e,n)=>t(95700)("./".concat(e,"/").concat(n,".json")))).init({...(0,c.FW)(),lng:void 0,detection:{order:["path","htmlTag","cookie","navigator"]},preload:[]})},70201:(e,n,t)=>{"use strict";t.d(n,{FW:()=>a,Mj:()=>s,YN:()=>o});let i="zh-Hant",s=[i,"zh-Hant","zh-Hans"],o="i18next",l="translation";function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return{supportedLngs:s,fallbackLng:i,lng:e,fallbackNS:l,defaultNS:l,ns:n}}},85393:(e,n,t)=>{"use strict";t.d(n,{default:()=>M});var i=t(57437),s=t(2265),o=t(56237),l=t(93059),a=t(86608),r=t(8244),c=t(20322),d=t(78178),u=t(7497),h=t(96293),m=t(34479),j=t(2638),g=t(84571),x=t(88477),v=t(98997),f=t(1597),p=t(91905),k=t(60399);function b(){let{colorScheme:e,toggleColorScheme:n}=(0,f.X)(),[t,o]=(0,s.useState)(()=>p.Z);return(0,s.useEffect)(()=>{o("dark"===e?k.Z:p.Z)},[e]),(0,i.jsx)(u.A,{variant:"default","aria-label":"Toggle theme",size:"lg",onClick:()=>n(),children:(0,i.jsx)(t,{style:{width:"80%",height:"80%"},stroke:1.5})})}var z=t(13866),y=t.n(z),_=t(16463),S=t(30998),Z=t(70201),C=t(47025);let w=e=>{let{opened:n,toggle:t,desktopOpened:s,toggleDesktop:o,lng:l}=e,f=(0,_.useRouter)(),p=(0,_.usePathname)(),{data:k,status:z}=(0,S.useSession)(),{t:w}=(0,C.$)(l,["common"]),O=e=>{f.push(e)},H=async()=>{await (0,S.signOut)({callbackUrl:"/"})},N=e=>{if(e===l)return;let n=p.split("/");Z.Mj.includes(n[1])?n[1]=e:n.splice(1,0,e);let t=n.join("/")||"/";f.push(t)};return(0,i.jsxs)("div",{className:y().inner,children:[(0,i.jsxs)(a.Z,{h:"100%",px:"md",children:[(0,i.jsx)(r.O,{opened:n,onClick:t,hiddenFrom:"sm",size:"sm"}),(0,i.jsx)(r.O,{opened:s,onClick:o,visibleFrom:"sm",size:"sm"}),(0,i.jsx)(j.Z,{style:{width:(0,c.h)(36),height:(0,c.h)(36)},stroke:1.5,color:"var(--mantine-color-red-filled)"}),(0,i.jsx)("div",{children:"Pokemon Nier"})]}),(0,i.jsx)("div",{className:y().actionIcon,children:(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(b,{}),(0,i.jsxs)(d.v,{withArrow:!0,children:[(0,i.jsx)(d.v.Target,{children:(0,i.jsx)(u.A,{variant:"default",size:"lg","aria-label":"Language",children:(0,i.jsx)(g.Z,{})})}),(0,i.jsxs)(d.v.Dropdown,{children:[(0,i.jsx)(d.v.Label,{children:w("common:navigation.language_selection")}),(0,i.jsx)(d.v.Item,{onClick:()=>N("zh-Hans"),children:(0,i.jsx)(h.Text,{children:"简体中文"})}),(0,i.jsx)(d.v.Item,{onClick:()=>N("zh-Hant"),children:(0,i.jsx)(h.Text,{children:"繁體中文"})})]})]}),"loading"===z?(0,i.jsx)(u.A,{variant:"default",size:"lg","aria-label":"Loading",children:(0,i.jsx)(m.a,{color:"blue"})}):k?(0,i.jsx)(u.A,{variant:"default",size:"lg","aria-label":"Logout",onClick:H,children:(0,i.jsx)(x.Z,{})}):(0,i.jsx)(u.A,{variant:"default",size:"lg","aria-label":"Login",onClick:()=>O("/login"),children:(0,i.jsx)(v.Z,{})})]})})]})};var O=t(59223),H=t(70999),N=t(37341),E=t(55553),L=t(26804);let P=e=>{let{lng:n}=e,t=(0,_.useRouter)(),{data:s,status:o}=(0,S.useSession)(),{t:l}=(0,C.$)(n,["common"]),a=e=>{t.push(e)};return(0,i.jsxs)("nav",{children:[(0,i.jsx)(O.O,{component:"button",label:l("common:navigation.home"),leftSection:(0,i.jsx)(H.Z,{size:"1rem",stroke:1.5}),onClick:()=>a("/")}),(0,i.jsx)(O.O,{component:"button",label:l("common:navigation.cards"),leftSection:(0,i.jsx)(N.Z,{size:"1rem",stroke:1.5}),onClick:()=>a("/cards")}),(0,i.jsxs)(O.O,{component:"button",label:l("common:navigation.deck"),leftSection:(0,i.jsx)(E.Z,{size:"1rem",stroke:1.5}),children:[(0,i.jsx)(O.O,{label:l("common:navigation.deck_list"),onClick:()=>a("/decks/list")}),(0,i.jsx)(O.O,{label:l("common:navigation.create_deck"),onClick:()=>a("/decks/build")}),s&&(0,i.jsx)(O.O,{label:l("common:navigation.my_decks"),onClick:()=>a("/decks/user")})]}),(0,i.jsx)(O.O,{component:"button",label:l("common:navigation.about"),leftSection:(0,i.jsx)(L.Z,{size:"1rem",stroke:1.5}),onClick:()=>a("/about")})]})};function M(e){let{children:n,lng:t}=e,[s,{toggle:a}]=(0,l.q)(),[r,{toggle:c}]=(0,l.q)(!0);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(o.V,{header:{height:60},navbar:{width:300,breakpoint:"sm",collapsed:{mobile:!s,desktop:!r}},padding:"md",children:[(0,i.jsx)(o.V.Header,{children:(0,i.jsx)(w,{opened:s,toggle:a,desktopOpened:r,toggleDesktop:c,lng:t})}),(0,i.jsx)(o.V.Navbar,{p:"md",children:(0,i.jsx)(P,{lng:t})}),(0,i.jsx)(o.V.Main,{children:n})]})})}},13866:e=>{e.exports={inner:"Header_inner__BWOOt",link:"Header_link___GWEF",actionIcon:"Header_actionIcon__d8zIz"}},98557:(e,n,t)=>{"use strict";t.d(n,{M:()=>d});var i=t(57437);t(2265);var s=t(50591),o=t(86348),l=t(17750),a=t(869),r={root:"m_4451eb3a"};let c={},d=(0,a.b)((e,n)=>{let t=(0,s.w)("Center",c,e),{classNames:a,className:d,style:u,styles:h,unstyled:m,vars:j,inline:g,mod:x,...v}=t,f=(0,o.y)({name:"Center",props:t,classes:r,className:d,style:u,classNames:a,styles:h,unstyled:m,vars:j});return(0,i.jsx)(l.x,{ref:n,mod:[{inline:g},x],...f("root"),...v})});d.classes=r,d.displayName="@mantine/core/Center"},60327:(e,n,t)=>{"use strict";t.d(n,{yK:()=>c,N9:()=>d,Ps:()=>o,c0:()=>r,zn:()=>l});var i=t(64881),s=t(2265);let o=function(e){let n=e,t=!1,i=new Set;return{getState:()=>n,updateState(e){n="function"==typeof e?e(n):e},setState(e){this.updateState(e),i.forEach(e=>e(n))},initialize(e){t||(n=e,t=!0)},subscribe:e=>(i.add(e),()=>i.delete(e))}}({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return(0,s.useSyncExternalStore)(e.subscribe,()=>e.getState(),()=>e.getState())};function a(e,n){let t=e.getState(),i=function(e,n,t){let i=[],s=[],o={};for(let l of e){let e=l.position||n;o[e]=o[e]||0,o[e]+=1,o[e]<=t?s.push(l):i.push(l)}return{notifications:s,queue:i}}(n([...t.notifications,...t.queue]),t.defaultPosition,t.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:t.limit,defaultPosition:t.defaultPosition})}function r(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,t=e.id||(0,i.k)();return a(n,n=>e.id&&n.some(n=>n.id===e.id)?n:[...n,{...e,id:t}]),t}function c(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return a(n,n=>n.filter(n=>{if(n.id===e){var t;return null===(t=n.onClose)||void 0===t||t.call(n,n),!1}return!0})),e}let d={show:r,hide:c,update:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return a(n,n=>n.map(n=>n.id===e.id?{...n,...e}:n)),e.id},clean:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;a(e,()=>[])},cleanQueue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;a(e,n=>n.slice(0,e.getState().limit))},updateState:a}},22966:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i});var i=(0,t(55487).Z)("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]])}},e=>{var n=n=>e(e.s=n);e.O(0,[4977,5501,8839,5588,5319,5948,2976,7235,5179,7130,6215,1744],()=>n(90530)),_N_E=e.O()}]);