(()=>{var e={};e.id=4976,e.ids=[4976],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63574:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>f});var s={};r.r(s),r.d(s,{GET:()=>p});var a=r(52412),n=r(14293),i=r(94147),o=r(77856),u=r(3089);let c=e=>{if(!e)return null;let t=e.split(",");return t.every(e=>!isNaN(Number(e)))?t.map(e=>Number(e)):t};async function p(e){try{let t=new URL(e.url).searchParams.get("sets"),r={};t&&(r={set:{in:t.split(",")}});let s=(await u._.card.findMany({where:r,orderBy:{number:"asc"}})).map(e=>({...e,dex:c(e.dex),attack_aspects_1:c(e.attack_aspects_1),attack_aspects_2:c(e.attack_aspects_2||null),retreat_aspects:c(e.retreat_aspects),reprints:e.reprints?e.reprints:null})),a={};return s.forEach(e=>{e.dex?.forEach(t=>{if("string"!=typeof t)return;a[t]||(a[t]={});let r=e.rarity;a[t][r]||(a[t][r]=0),a[t][r]+=1})}),o.NextResponse.json(a,{status:200})}catch(e){return console.error("Error fetching cards:",e),o.NextResponse.json({error:"無法取得卡片資料。"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/card/count/route",pathname:"/api/card/count",filename:"route",bundlePath:"app/api/card/count/route"},resolvedPagePath:"D:\\MyCode\\GameMantine\\app\\api\\card\\count\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:f,serverHooks:m}=l;function x(){return(0,i.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:f})}},35303:()=>{},3089:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});var s=r(53524);let a=global.prisma||new s.PrismaClient({log:["query","info","warn","error"]})},21152:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let s=Reflect.get(e,t,r);return"function"==typeof s?s.bind(e):s}static set(e,t,r,s){return Reflect.set(e,t,r,s)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4147,8814],()=>r(63574));module.exports=s})();