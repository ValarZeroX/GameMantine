(()=>{var e={};e.id=7952,e.ids=[7952],e.modules={53681:(e,t,r)=>{var s={"./en/ability.json":[21695,1695],"./en/common.json":[7790,7790],"./en/pokemon.json":[52763,2763],"./en/rule.json":[19166,9166],"./en/skill.json":[68591,8591],"./zh-Hans/ability.json":[47321,7321],"./zh-Hans/common.json":[26476,6476],"./zh-Hans/pokemon.json":[73407,3407],"./zh-Hans/rule.json":[59620,9620],"./zh-Hans/skill.json":[61529,1529],"./zh-Hant/ability.json":[48380,8380],"./zh-Hant/common.json":[87097,7097],"./zh-Hant/pokemon.json":[88636,8636],"./zh-Hant/rule.json":[42877,2877],"./zh-Hant/skill.json":[88227,8227]};function n(e){if(!r.o(s,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=s[e],n=t[0];return r.e(t[1]).then(()=>r.t(n,19))}n.keys=()=>Object.keys(s),n.id=53681,e.exports=n},53524:e=>{"use strict";e.exports=require("@prisma/client")},67096:e=>{"use strict";e.exports=require("bcrypt")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},55315:e=>{"use strict";e.exports=require("path")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},91671:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=r(3003),n=r(14293),o=r(66550),a=r.n(o),i=r(86979),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["[lng]",{children:["user",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1203)),"D:\\MyCode\\GameMantine\\app\\[lng]\\user\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,51028)),"D:\\MyCode\\GameMantine\\app\\[lng]\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,20691)),"D:\\MyCode\\GameMantine\\app\\[lng]\\not-found.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,52075,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\MyCode\\GameMantine\\app\\[lng]\\user\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/[lng]/user/page",pathname:"/[lng]/user",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},82748:(e,t,r)=>{Promise.resolve().then(r.bind(r,30221)),Promise.resolve().then(r.bind(r,41737))},30221:(e,t,r)=>{"use strict";r.d(t,{default:()=>v});var s=r(68819),n=r(17266),o=r(71260),a=r(67852),i=r(75923),l=r(11348),c=r(46948),d=r(55987),u=r(48013),m=r(38750),x=r(19941),p=r(90434),h=r(24103),j=r(35047),g=r(77109),f=r(9531);let v=({lng:e})=>{let{data:t}=(0,g.useSession)(),{t:r}=(0,h.$)(e,["common"]),v=(0,j.useRouter)(),[b,k]=(0,n.useState)(""),[_,y]=(0,n.useState)(""),[w,z]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{if(t)try{let e=await fetch("/api/user/getUser"),t=await e.json();e.ok&&(k(t.user.name),y(t.user.pokemonId))}catch(e){}})()},[t]);let C=async()=>{z(!0);try{let e=await fetch("/api/user/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:b,pokemonId:_})}),t=await e.json();e.ok?((0,f.c0)({title:r("common:notification.success"),message:r("common:notification.update_success"),color:"green"}),v.refresh()):(0,f.c0)({title:r("common:notification.error_title"),message:t.error||r("common:notification.update_failed"),color:"red"})}catch(e){console.error("更新失败:",e),(0,f.c0)({title:r("common:notification.error_title"),message:r("common:notification.update_failed"),color:"red"})}finally{z(!1)}},O=[{title:r("common:navigation.home"),href:"/"},{title:r("common:navigation.member_settings"),href:"#"}].map((e,t)=>(0,s.jsx)(o.e,{href:e.href,children:e.title},t));return(0,s.jsx)(a.W,{size:"lg",children:t?.user?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.O,{children:O}),(0,s.jsx)(d.Title,{order:1,mt:"sm",children:r("common:navigation.member_settings")}),(0,s.jsxs)(u.x,{mt:"md",children:[(0,s.jsx)(m.o,{label:r("common:name"),placeholder:r("common:enter_name"),value:b,onChange:e=>k(e.target.value),required:!0,mb:"sm"}),(0,s.jsx)(m.o,{label:r("common:pokemon_id"),placeholder:r("common:enter_pokemon_id"),value:_,onChange:e=>y(e.target.value),mb:"sm"}),(0,s.jsx)(x.z,{onClick:C,loading:w,disabled:w,children:r("common:save_changes")})]})]}):(0,s.jsx)(i.M,{children:(0,s.jsxs)(l.Text,{children:[r("common:errors.error_insufficient_permissions")," ",(0,s.jsx)(o.e,{component:p.default,href:"/login",size:"sm",children:r("common:login.login")})]})})})}},41737:(e,t,r)=>{"use strict";r.d(t,{default:()=>B});var s=r(68819),n=r(17266),o=r(28964),a=r(64058),i=r(22887),l=r(65582),c=r(91603),d=r(15700),u=r(26622),m=r(11348),x=r(61495),p=r(10773),h=r(80104),j=r(7380),g=r(41295),f=r(10128),v=r(64443);function b(){let{colorScheme:e,toggleColorScheme:t}=(0,f.X)(),[r,o]=(0,n.useState)(()=>v.Z);return(0,s.jsx)(u.A,{variant:"default","aria-label":"Toggle theme",size:"lg",onClick:()=>t(),children:(0,s.jsx)(r,{style:{width:"80%",height:"80%"},stroke:1.5})})}r(75382);var k=r(26699),_=r.n(k),y=r(35047),w=r(77109),z=r(17561),C=r(24103);let O=({opened:e,toggle:t,desktopOpened:r,toggleDesktop:n,lng:o})=>{let a=(0,y.useRouter)(),f=(0,y.usePathname)(),{data:v,status:k}=(0,w.useSession)(),{t:O}=(0,C.$)(o,["common"]),q=e=>{a.push(e)},M=async()=>{await (0,w.signOut)({callbackUrl:"/"})},P=e=>{if(e===o)return;let t=f.split("/");z.Mj.includes(t[1])?t[1]=e:t.splice(1,0,e);let r=t.join("/")||"/";a.push(r)};return(0,s.jsxs)("div",{className:_().inner,children:[(0,s.jsxs)(i.Z,{h:"100%",px:"md",children:[(0,s.jsx)(l.O,{opened:e,onClick:t,hiddenFrom:"sm",size:"sm"}),(0,s.jsx)(l.O,{opened:r,onClick:n,visibleFrom:"sm",size:"sm"}),(0,s.jsx)(p.Z,{style:{width:(0,c.h)(36),height:(0,c.h)(36)},stroke:1.5,color:"var(--mantine-color-red-filled)"}),(0,s.jsx)("div",{children:"Pokemon Nier"})]}),(0,s.jsx)("div",{className:_().actionIcon,children:(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(b,{}),(0,s.jsxs)(d.v,{withArrow:!0,children:[(0,s.jsx)(d.v.Target,{children:(0,s.jsx)(u.A,{variant:"default",size:"lg","aria-label":"Language",children:(0,s.jsx)(h.Z,{})})}),(0,s.jsxs)(d.v.Dropdown,{children:[(0,s.jsx)(d.v.Label,{children:O("common:navigation.language_selection")}),(0,s.jsx)(d.v.Item,{onClick:()=>P("en"),children:(0,s.jsx)(m.Text,{children:"English"})}),(0,s.jsx)(d.v.Item,{onClick:()=>P("zh-Hans"),children:(0,s.jsx)(m.Text,{children:"简体中文"})}),(0,s.jsx)(d.v.Item,{onClick:()=>P("zh-Hant"),children:(0,s.jsx)(m.Text,{children:"繁體中文"})})]})]}),"loading"===k?(0,s.jsx)(u.A,{variant:"default",size:"lg","aria-label":"Loading",children:(0,s.jsx)(x.a,{color:"blue"})}):v?(0,s.jsx)(u.A,{variant:"default",size:"lg","aria-label":"Logout",onClick:M,children:(0,s.jsx)(j.Z,{})}):(0,s.jsx)(u.A,{variant:"default",size:"lg","aria-label":"Login",onClick:()=>q("/login"),children:(0,s.jsx)(g.Z,{})})]})})]})};var q=r(52165),M=r(3484),P=r(43684),S=r(39299),T=r(73366),Z=r(14100),N=r(51036),A=r(24089),H=r(94468),E=r(93610),G=r(38018),I=r(30856),D=r.n(I);let F=({})=>{let{data:e,status:t}=(0,w.useSession)();return(0,s.jsx)(E.k,{className:D().user,children:(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(G.q,{radius:"xl",style:{cursor:"pointer"},name:e?.user.name??"",color:"initials"},e?.user.name??""),(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsx)(m.Text,{size:"sm",fw:500,children:e?.user.name??""}),(0,s.jsx)(m.Text,{c:"dimmed",size:"xs",children:e?.user.email})]}),(0,s.jsx)(H.Z,{size:14,stroke:1.5})]})})};var L=r(74984),$=r.n(L);let U=({lng:e})=>{let t=(0,y.useRouter)(),{data:r,status:n}=(0,w.useSession)(),{t:o}=(0,C.$)(e,["common"]),a=e=>{t.push(e)};return(0,s.jsxs)(q.K,{justify:"space-between",h:"100%",children:[(0,s.jsxs)("nav",{children:[(0,s.jsx)(M.O,{component:"button",label:o("common:navigation.home"),leftSection:(0,s.jsx)(P.Z,{size:"1rem",stroke:1.5}),onClick:()=>a("/")}),(0,s.jsx)(M.O,{component:"button",label:o("common:navigation.cards"),leftSection:(0,s.jsx)(S.Z,{size:"1rem",stroke:1.5}),onClick:()=>a("/cards")}),(0,s.jsxs)(M.O,{component:"button",label:o("common:navigation.deck"),leftSection:(0,s.jsx)(T.Z,{size:"1rem",stroke:1.5}),children:[(0,s.jsx)(M.O,{label:o("common:navigation.deck_list"),onClick:()=>a("/decks/list")}),(0,s.jsx)(M.O,{label:o("common:navigation.create_deck"),onClick:()=>a("/decks/build")}),r&&(0,s.jsx)(M.O,{label:o("common:navigation.my_decks"),onClick:()=>a("/decks/user")})]}),(0,s.jsx)(M.O,{component:"button",label:o("common:pokedex_collection"),leftSection:(0,s.jsx)(Z.Z,{size:"1rem",stroke:1.5}),onClick:()=>a("/recommend")}),(0,s.jsx)(M.O,{component:"button",label:o("common:community"),leftSection:(0,s.jsx)(N.Z,{size:"1rem",stroke:1.5}),children:(0,s.jsx)(M.O,{label:o("common:friend"),onClick:()=>a("/community/friend")})}),(0,s.jsx)(M.O,{component:"button",label:o("common:navigation.about"),leftSection:(0,s.jsx)(A.Z,{size:"1rem",stroke:1.5}),onClick:()=>a("/about")})]}),r&&(0,s.jsx)("div",{className:$().footer,onClick:()=>a("/user"),children:(0,s.jsx)(F,{})})]})};function B({children:e,lng:t}){let[r,{toggle:n}]=(0,a.q)(),[i,{toggle:l}]=(0,a.q)(!0);return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(o.V,{header:{height:60},navbar:{width:300,breakpoint:"sm",collapsed:{mobile:!r,desktop:!i}},padding:"md",children:[(0,s.jsx)(o.V.Header,{children:(0,s.jsx)(O,{opened:r,toggle:n,desktopOpened:i,toggleDesktop:l,lng:t})}),(0,s.jsx)(o.V.Navbar,{p:"md",children:(0,s.jsx)(U,{lng:t})}),(0,s.jsx)(o.V.Main,{children:e})]})})}},26699:e=>{e.exports={inner:"Header_inner__BWOOt",link:"Header_link___GWEF",actionIcon:"Header_actionIcon__d8zIz"}},74984:e=>{e.exports={footer:"NavbarNested_footer__gOMUs"}},30856:e=>{e.exports={user:"UserButton_user__IEgLw"}},80729:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>e});var n=r(71851);let e=(await (0,n.createProxy)(String.raw`D:\MyCode\GameMantine\app\[lng]\user\UserPageClient.tsx`)).default;s()}catch(e){s(e)}},1)},1203:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>d,generateMetadata:()=>c});var n=r(89351);r(22052);var o=r(38859),a=r(46061),i=r(80729),l=e([o,i]);async function c({params:e}){let{lng:t}=await e,{t:r}=await (0,a.$)(t,"common");return{title:r("metadata.user_page_title"),description:r("metadata.user_page_description"),keywords:r("metadata.user_page_keywords")}}[o,i]=l.then?(await l)():l;let d=async({params:e})=>{let{lng:t}=await e;return(0,n.jsx)(o.default,{lng:t,children:(0,n.jsx)(i.default,{lng:t})})};s()}catch(e){s(e)}})},46061:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var s=r(95131),n=r(25369),o=r(7372),a=r(24546);let i=async(e,t)=>{let i=(0,s.Fs)();return await i.use(o.D).use((0,n.Z)((e,t)=>r(53681)(`./${e}/${t}.json`))).init({...(0,a.FW)(e,t),load:"currentOnly"}),i};async function l(e,t,r={}){let s=await i(e,t);return{t:s.getFixedT(e,Array.isArray(t)?t[0]:t),i18n:s}}},38859:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>e});var n=r(71851);let e=(await (0,n.createProxy)(String.raw`D:\MyCode\GameMantine\components\Layout\Layout.tsx`)).default;s()}catch(e){s(e)}},1)},71260:(e,t,r)=>{"use strict";r.d(t,{e:()=>d});var s=r(68819),n=r(41135);r(17266);var o=r(4531),a=r(11115),i=r(11348),l={root:"m_849cf0da"};let c={underline:"hover"},d=(0,a.b)((e,t)=>{let{underline:r,className:a,unstyled:d,mod:u,...m}=(0,o.w)("Anchor",c,e);return(0,s.jsx)(i.Text,{component:"a",ref:t,className:(0,n.Z)({[l.root]:!d},a),...m,mod:[{underline:r},u],__staticSelector:"Anchor",unstyled:d})});d.classes=l,d.displayName="@mantine/core/Anchor"},46948:(e,t,r)=>{"use strict";r.d(t,{O:()=>h});var s=r(68819),n=r(17266),o=r(37910),a=r(95540),i=r(7755),l=r(4531),c=r(89655),d=r(48013),u=r(84362),m={root:"m_8b3717df",breadcrumb:"m_f678d540",separator:"m_3b8f2208"};let x={separator:"/"},p=(0,i.Z)((e,{separatorMargin:t})=>({root:{"--bc-separator-margin":(0,a.bG)(t)}})),h=(0,u.d5)((e,t)=>{let r=(0,l.w)("Breadcrumbs",x,e),{classNames:a,className:i,style:u,styles:h,unstyled:j,vars:g,children:f,separator:v,separatorMargin:b,...k}=r,_=(0,c.y)({name:"Breadcrumbs",classes:m,props:r,className:i,style:u,classNames:a,styles:h,unstyled:j,vars:g,varsResolver:p}),y=n.Children.toArray(f).reduce((e,t,r,s)=>{let a=(0,o.k)(t)?(0,n.cloneElement)(t,{..._("breadcrumb",{className:t.props?.className}),key:r}):(0,n.createElement)("div",{..._("breadcrumb"),key:r},t);return e.push(a),r!==s.length-1&&e.push((0,n.createElement)(d.x,{..._("separator"),key:`separator-${r}`},v)),e},[]);return(0,s.jsx)(d.x,{ref:t,..._("root"),...k,children:y})});h.classes=m,h.displayName="@mantine/core/Breadcrumbs"},38750:(e,t,r)=>{"use strict";r.d(t,{o:()=>l});var s=r(68819);r(17266);var n=r(4531),o=r(84362),a=r(60292);let i={},l=(0,o.d5)((e,t)=>{let r=(0,n.w)("TextInput",i,e);return(0,s.jsx)(a.M,{component:"input",ref:t,...r,__staticSelector:"TextInput"})});l.classes=a.M.classes,l.displayName="@mantine/core/TextInput"}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4147,9908,3828,5080,6429,434,292,7139],()=>r(91671));module.exports=s})();